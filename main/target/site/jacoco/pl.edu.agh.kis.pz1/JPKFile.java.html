<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="pl"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>JPKFile.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">main</a> &gt; <a href="index.source.html" class="el_package">pl.edu.agh.kis.pz1</a> &gt; <span class="el_source">JPKFile.java</span></div><h1>JPKFile.java</h1><pre class="source lang-java linenums">package pl.edu.agh.kis.pz1;

import jakarta.xml.bind.annotation.*;

import java.math.BigDecimal;
import java.util.ArrayList;

@XmlRootElement(name = &quot;tns:JPK&quot;)
public class JPKFile {

    static public class Header {
        @XmlElement(name = &quot;tns:KodFormularza&quot;)
        String formCode;

        @XmlElement(name = &quot;tns:WariantFormularza&quot;)
        String formVariant;

        @XmlElement(name = &quot;tns:CelZlozenia&quot;)
        String purpose;

        @XmlElement(name = &quot;tns:DataWytworzeniaJPK&quot;)
        String creationDate;

        @XmlElement(name = &quot;tns:DataOd&quot;)
        String startDate;

        @XmlElement(name = &quot;tns:DataDo&quot;)
        String endDate;

        @XmlElement(name = &quot;tns:KodUrzedu&quot;)
        String officeCode;

<span class="fc" id="L33">        public Header() {</span>
<span class="fc" id="L34">            formCode = &quot;JPK_FA&quot;;</span>
<span class="fc" id="L35">            formVariant = &quot;3&quot;;</span>
<span class="fc" id="L36">            purpose = &quot;1&quot;;</span>
<span class="fc" id="L37">            creationDate = &quot;2021-05-20&quot;;</span>
<span class="fc" id="L38">            startDate = &quot;2021-05-01&quot;;</span>
<span class="fc" id="L39">            endDate = &quot;2021-05-20&quot;;</span>
<span class="fc" id="L40">            officeCode = &quot;123456789&quot;;</span>
<span class="fc" id="L41">        }</span>
    }

    static public class Subject {
        static public class SubjectIdentity {
            @XmlElement(name = &quot;etd:NIP&quot;)
            String nip;

            @XmlElement(name = &quot;etd:PelnaNazwa&quot;)
            String fullName;

<span class="fc" id="L52">            SubjectIdentity() {</span>
<span class="fc" id="L53">                nip = &quot;1234567890&quot;;</span>
<span class="fc" id="L54">                fullName = &quot;Jan Kowalski&quot;;</span>
<span class="fc" id="L55">            }</span>
        }

        static public class SubjectAddress {
            @XmlElement(name = &quot;etd:KodKraju&quot;)
            String countryCode;

            @XmlElement(name = &quot;etd:Wojewodztwo&quot;)
            String province;

            @XmlElement(name = &quot;etd:Powiat&quot;)
            String district;

            @XmlElement(name = &quot;etd:Gmina&quot;)
            String commune;

            @XmlElement(name = &quot;etd:Ulica&quot;)
            String street;

            @XmlElement(name = &quot;etd:NrDomu&quot;)
            String houseNumber;

            @XmlElement(name = &quot;etd:NrLokalu&quot;)
            String apartmentNumber;

            @XmlElement(name = &quot;etd:Miejscowosc&quot;)
            String city;

            @XmlElement(name = &quot;etd:KodPocztowy&quot;)
            String postalCode;

<span class="fc" id="L86">            SubjectAddress() {</span>
<span class="fc" id="L87">                countryCode = &quot;PL&quot;;</span>
<span class="fc" id="L88">                province = &quot;Dolnośląskie&quot;;</span>
<span class="fc" id="L89">                district = &quot;Wrocławski&quot;;</span>
<span class="fc" id="L90">                commune = &quot;Wrocław&quot;;</span>
<span class="fc" id="L91">                street = &quot;Koszykowa&quot;;</span>
<span class="fc" id="L92">                houseNumber = &quot;1&quot;;</span>
<span class="fc" id="L93">                apartmentNumber = &quot;1&quot;;</span>
<span class="fc" id="L94">                city = &quot;Wrocław&quot;;</span>
<span class="fc" id="L95">                postalCode = &quot;50-000&quot;;</span>
<span class="fc" id="L96">            }</span>
        }

        @XmlElement(name = &quot;tns:IdentyfikatorPodmiotu&quot;)
        SubjectIdentity identity;

        @XmlElement(name = &quot;tns:AdresPodmiotu&quot;)
        SubjectAddress address;

<span class="fc" id="L105">        Subject() {</span>
<span class="fc" id="L106">            identity = new SubjectIdentity();</span>
<span class="fc" id="L107">            address = new SubjectAddress();</span>
<span class="fc" id="L108">        }</span>
    }

    static public class InvoiceControl {
        @XmlElement(name = &quot;tns:LiczbaFakur&quot;)
        int invoiceCount;

        @XmlElement(name = &quot;tns:WartoscFaktur&quot;)
        BigDecimal invoicesValue;

<span class="nc" id="L118">        InvoiceControl() {</span>
<span class="nc" id="L119">            invoiceCount = 0;</span>
<span class="nc" id="L120">            invoicesValue = BigDecimal.ZERO;</span>
<span class="nc" id="L121">        }</span>

<span class="fc" id="L123">        InvoiceControl(ArrayList&lt;Invoice&gt; invoices) {</span>
<span class="fc" id="L124">            invoiceCount = invoices.size();</span>
<span class="fc" id="L125">            invoicesValue = BigDecimal.ZERO;</span>
<span class="fc bfc" id="L126" title="All 2 branches covered.">            for (Invoice invoice : invoices) {</span>
<span class="fc" id="L127">                invoicesValue = invoicesValue.add(invoice.totalGrossPrice);</span>
<span class="fc" id="L128">            }</span>
<span class="fc" id="L129">        }</span>
    }

    static public class ElementControl {
        @XmlElement(name = &quot;tns:LiczbaWierszyFaktur&quot;)
        int invoiceRowCount;

        @XmlElement(name = &quot;tns:WartoscWierszyFaktur&quot;)
        BigDecimal invoicesValue;

<span class="nc" id="L139">        ElementControl() {</span>
<span class="nc" id="L140">            invoiceRowCount = 0;</span>
<span class="nc" id="L141">            invoicesValue = BigDecimal.ZERO;</span>
<span class="nc" id="L142">        }</span>

<span class="fc" id="L144">        ElementControl(ArrayList&lt;Item&gt; items) {</span>
<span class="fc" id="L145">            invoiceRowCount = items.size();</span>
<span class="fc" id="L146">            invoicesValue = BigDecimal.ZERO;</span>
<span class="pc bpc" id="L147" title="1 of 2 branches missed.">            for (Item item : items) {</span>
<span class="nc" id="L148">                invoicesValue = invoicesValue.add(item.totalGrossPrice);</span>
<span class="nc" id="L149">            }</span>
<span class="fc" id="L150">        }</span>
    }

    @XmlElement(name = &quot;tns:Naglowek&quot;)
    public Header header;

    @XmlElement(name = &quot;tns:Podmiot1&quot;)
    public Subject subject;

    @XmlElement(name = &quot;tns:Faktura&quot;)
    public ArrayList&lt;Invoice&gt; invoices;

    @XmlElement(name = &quot;tns:FakturaCtrl&quot;)
    public InvoiceControl invoiceControl;

    @XmlElement(name = &quot;tns:FakturaWiersz&quot;)
    public ArrayList&lt;Item&gt; items;

    @XmlElement(name = &quot;tns:FakturaWierszCtrl&quot;)
    public ElementControl elementControl;

<span class="fc" id="L171">    public JPKFile() {</span>
<span class="fc" id="L172">        this.header = new Header();</span>
<span class="fc" id="L173">        this.subject = new Subject();</span>

<span class="fc" id="L175">        this.invoices = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L176">        this.items = new ArrayList&lt;&gt;();</span>

<span class="fc" id="L178">        this.invoiceControl = new InvoiceControl(this.invoices);</span>
<span class="fc" id="L179">        this.elementControl = new ElementControl(this.items);</span>
<span class="fc" id="L180">    }</span>

    public void addInvoices(ArrayList&lt;Invoice&gt; invoices) {
<span class="fc" id="L183">        this.invoices.addAll(invoices);</span>

<span class="fc bfc" id="L185" title="All 2 branches covered.">        for (Invoice invoice : invoices) {</span>
<span class="fc" id="L186">            this.items.addAll(invoice.items);</span>
<span class="fc" id="L187">        }</span>

<span class="fc" id="L189">        this.invoiceControl = new InvoiceControl(this.invoices);</span>
<span class="fc" id="L190">        this.elementControl = new ElementControl(this.items);</span>
<span class="fc" id="L191">    }</span>


}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>